# Spark Configuration File

spark.master local[*]
spark.app.name air-quality-spark-job

# Driver and Executor Settings
spark.driver.memory 2g
spark.executor.memory 2g
spark.executor.cores 2

# Network Settings
spark.network.timeout 600s
spark.executor.heartbeatInterval 60s

# Shuffle Settings
spark.shuffle.file.buffer 64k
spark.shuffle.memoryFraction 0.2

# Memory Settings
spark.memory.fraction 0.6
spark.memory.storageFraction 0.5

# Serialization
spark.serializer org.apache.spark.serializer.KryoSerializer

# SQL Settings
spark.sql.shuffle.partitions 200
spark.sql.adaptive.enabled true
spark.sql.adaptive.coalescePartitions.enabled true

# Hadoop Settings
spark.hadoop.fs.s3a.access.key ${AWS_ACCESS_KEY_ID}
spark.hadoop.fs.s3a.secret.key ${AWS_SECRET_ACCESS_KEY}
spark.hadoop.fs.s3a.endpoint ${AWS_ENDPOINT}

# Kafka Integration
spark.kafka.bootstrap.servers kafka:9092

# Logging
spark.eventLog.enabled true
spark.eventLog.dir /var/spark-logs
spark.history.fs.logDirectory /var/spark-logs

# Dynamic Allocation
spark.dynamicAllocation.enabled false

# Compression
spark.io.compression.codec snappy
spark.sql.inMemoryColumnarStorage.compressed true

# Partitioning
spark.sql.statistics.histogram.enabled true
spark.sql.statistics.histogram.numBins 254
